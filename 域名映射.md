# åŸŸåæ˜ å°„

## ä»€ä¹ˆæ˜¯åŸŸåæ˜ å°„?

æœ€åŸºæœ¬çš„ã€ŒåŸŸåæ˜ å°„ã€ = è®©ä¸€ä¸ªåŸŸåè§£æžåˆ°ä¸€ä¸ªæŒ‡å®š IPã€‚åœ¨æœ¬åœ°ï¼Œå°±æ˜¯æ”¹ `/etc/hosts`, æŠŠåŸŸå â†’ IP å†™æ­»

## ðŸŒŸ åœºæ™¯ 1ï¼šæœ¬åœ°å¼€å‘å‡åŸŸå

ä½ åœ¨æœ¬æœºèµ·äº†ä¸€ä¸ªæœåŠ¡ï¼ˆlocalhost:3000ï¼‰ä½ å¸Œæœ›ç”¨è·Ÿçº¿ä¸Šç±»ä¼¼çš„åŸŸåæ¥è®¿é—®

```bash
127.0.0.1 admin-management-mdata-1.test.heytea.com
```

æµè§ˆå™¨è®¿é—®

```bash
https://admin-management-mdata-1.test.heytea.com:3007
```

ðŸ“Œ å¥½å¤„: 
- æµ‹è¯• Cookie åŸŸåç­–ç•¥
- æµ‹è¯•è·¨åŸŸ
- ä¿è¯ä¸Žç”Ÿäº§çŽ¯å¢ƒä¸€è‡´

## ðŸŒŸ åœºæ™¯ 2ï¼šå¤šæœåŠ¡æœ¬åœ°è”è°ƒ

åŽç«¯æœ¬åœ°åœ¨ 3000
å‰ç«¯æœ¬åœ°åœ¨ 5173
éœ€è¦è”è°ƒ

```bash
127.0.0.1  api.dev.example.com
```

æœ¬åœ°å‰ç«¯å°±å¯ä»¥ç”¨â€œçœŸå®žåŸŸåâ€è°ƒç”¨åŽç«¯ï¼Œä¸ç”¨åˆ°å¤„æ”¹ `baseURL`

## ðŸŒŸ åœºæ™¯ 3ï¼šåŽç«¯æœåŠ¡è°ƒç”¨

æœ¬åœ°å¤šä¸ªå¾®æœåŠ¡
éœ€è¦ç”¨æœåŠ¡å‘çŽ°çš„â€œæœåŠ¡åŸŸåâ€

```bash
127.0.0.1  userservice.internal
127.0.0.1  orderservice.internal
```

åœ¨ä»£ç é‡Œäº›

```tsx
fetch('http://userservice.internal/users')
```


## ðŸŒŸ åœºæ™¯ 4ï¼šæµ‹è¯•æŒ‡å®šIP

æŸåŸŸååœ¨å…¬ç½‘æŒ‡å‘ç”Ÿäº§ ä½†ä½ æƒ³åœ¨ç°åº¦æœºä¸Šæµ‹è¯•æ–°ç‰ˆæœ¬

å¯ä»¥ä¸´æ—¶æ˜ å°„ï¼š

```bash
10.0.0.88 api.example.com
```

## æ— æ³•é€šè¿‡åªé ä¿®æ”¹hostsç»•å¼€è·¨åŸŸ

`protocol://domain:port` ä¸‰è€…ä¸­ä»»æ„ä¸€ä¸ªä¸åŒ,å°±ç®—è·¨åŸŸ

hosts å¯ä»¥å¸®åŠ©ä½ æ¨¡æ‹ŸåŸŸåã€ç»Ÿä¸€ originï¼Œä½†ä¸èƒ½ç»•å¼€æµè§ˆå™¨çš„ CORS å®‰å…¨æœºåˆ¶

çœŸæ­£çš„è·¨åŸŸè§£å†³æ–¹æ³•æ˜¯:
- 1. è®©åŽç«¯è®¾ç½® `Access-Control-Allow-Origin`
- 2. ä½¿ç”¨ä»£ç†ï¼ˆå¼€å‘é˜¶æ®µæŽ¨èï¼‰

```ts
{
    proxy: {
        '/api': {
            target: 'http://localhost:4000',
            changeOrigin: true,
            rewrite: path => path.replace(/^\/api/, ''),
        },
    }
}
```