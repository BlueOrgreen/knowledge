

## react-sortable-hoc

目前我们用的 react-sortable-hoc 不声明支持 React 18，但在实际测试中功能正常。短期可通过 overrides 忽略警告，长期建议更换成维护中的 dnd-kit，以避免后续 React 升级带来的不兼容风险。

## dumi

升级为 2.0 版本

文档: https://d.umijs.org/guide/project-structure#%E8%BF%90%E8%A1%8C%E6%97%B6%E9%85%8D%E7%BD%AE

## 使用 rollup 打包

> 我们目前组件库的构建链路是基于 Gulp 来跑任务，但 Gulp 本质是个任务流工具，不是专门的打包工具。
> 如果我们想让组件库更轻量、更适配不同环境、支持按需加载，Rollup 的专业性会更高。
> 大部分知名组件库（Ant Design、Element Plus、VueUse）都在用 Rollup，它的 Tree-shaking 能让我们的产物更小，对最终业务包体积有直接好处。
> 建议未来将打包部分迁移到 Rollup，Gulp 只保留辅助任务，逐步降低维护成本。

| 项目          | Gulp                              | Rollup                |
| ----------- | --------------------------------- | --------------------- |
| **一次性改造成本** | 低（现有就能跑）                          | 中（需要配置和迁移脚本）          |
| **长期维护成本**  | 高（插件更新频繁，兼容性差）                    | 低（配置稳定，升级成本低）         |
| **产物质量**    | 中（可能存在冗余代码）                       | 高（Tree-shaking + 多格式） |
| **生态趋势**    | 弱化（被 webpack/vite/esbuild 取代部分场景） | 强化（组件库、SDK 首选）        |


如果你的项目要使用 Dumi 2 来做文档网站或组件库文档，那么是需要安装 @umijs/preset-dumi 的。它是 Dumi 2 的官方 preset，用来配置 Umi 框架以支持 Dumi 功能，包括文档路由、主题、API 组件等。

具体说明：

Dumi 2 和 Dumi 1 的区别

- Dumi 1 自带内置的 theme 文件夹，可以直接使用 .dumi/theme。
- Dumi 2 改成了基于 @umijs/preset-dumi 的 preset，需要单独安装，.dumi/theme 不再直接存在。

安装方式

pnpm add -D @umijs/preset-dumi
# 或者
npm install -D @umijs/preset-dumi
# 或者
yarn add -D @umijs/preset-dumi


配置方式
在你的 .umirc.ts 或 config/config.ts 里：

import { defineConfig } from 'umi';

export default defineConfig({
  presets: [require.resolve('@umijs/preset-dumi')],
  // 其他配置
});


启动

dumi dev


✅ 总结：如果你用的是 Dumi 2，而且想运行文档网站或组件库文档，是 必须安装 @umijs/preset-dumi 的，否则启动时会找不到 dumi/theme。

## 如何本地开发

在组件库子包内

```bash
pnpm link --global
```

在业务项目中
```bash
pnpm link --global @heytea/knapsack-components
```

## Todo List

1. 国际化
2. 权限相关组件
